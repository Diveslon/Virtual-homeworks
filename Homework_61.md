# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ
- Для электронных чеки в json виде лучше всего использовать документо-ориентированнные СУБД, например MongoDB или Elasticsearch.
- Для складов и автомобильных дорог для логистической компании лучше подойдут графовые или сетевые ( правда сейчас из-за сложностости обслуживания практически не используются) СУБД, например Amazon Neptune, OrientDB, Titan и т.д.
- Для генеалогических деревьев следует использовать иерархическую структуру, где данные организованы в древовидную структуру, например Cache или DBOMP
- Для кэша идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации лучше использовать БД на основе пар "ключ-значение", например Redis, Memcached, Riak и Dynamo от Amazon
- Для отношения клиент-покупка для интернет-магазина я бы всё-таки использовал реляционные БД, такие как PostgreeSQL, MsSQL, Firebird, MySQL

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ
- Так как запись на узлы асинхронная, то это устойчивость к разделению ( partition tolerance)
- Так же как и система может разделиться на 2 раздельных кластера - это устойчивость к разделению ( partition tolerance)
- Так как система может не прислать корректный ответ или сбросить соединение - то определим это как согласованность данных (consistency)
Из этого сделаем вывод, что согласно CAP-теореме, такая система имеет классификацию CP.
А если брать расширенную теорему, то я думаю иодель будет EC/PC



## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ
Принципы BASE и ACID не могут сочетаться в одной системе. Базы данных BASE почти полностью отказываются от требований согласованности модели ACID. Одна из основных концепций, лежащих в основе BASE, заключается в том, что согласованность данных является проблемой разработчика и не должна обрабатываться базой данных. ACID базы данных обеспечивают согласованность каждой транзакции с бизнес-правилами базы данных. Если какой-либо элемент атомарной транзакции нарушит целостность базы данных, вся транзакция завершится неудачно.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

### Ответ
Хранилище ключ-значение, имеющим механизм Pub/Sub ( Издатель/Подписчик), которая реализуентся так:
- подписчик регистрируется на сообщения издателя
- Издатель создаёт сообщение и публикует его в стеке ( очереди) FIFO
- Подписчик(и) принимают сообщение и обрабатывают его

Плюсом такой системы является его явное огромное быстродействии. Минусом то, что так нельзя хранить постоянные данные, поскольку не можем использовать большой объём и эта система не консистентна.

